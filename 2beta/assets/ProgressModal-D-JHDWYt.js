import{r as p,j as e}from"./index-B6Z5vlXe.js";const f=({show:b,title:N,progress:a,onClose:n})=>{const[d,j]=p.useState(!1),[c,g]=p.useState(!1);if(!b)return null;const r=a.total>0?Math.round(a.current/a.total*100):0,t=!a.isProcessing&&a.current===a.total&&a.total>0,o=a.results.filter(s=>s.success),m=a.results.filter(s=>!s.success),x=s=>s.seasonNumber!==void 0&&s.episodeNumber!==void 0?`S${s.seasonNumber}E${s.episodeNumber} - ${s.episodeTitle}`:s.episodeTitle;return e.jsx("div",{className:"modal d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:t?"Update Complete":N}),t&&n&&e.jsx("button",{type:"button",className:"btn-close",onClick:n,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"progress mb-3",style:{height:"25px"},children:e.jsxs("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:`${r}%`},"aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,children:[r,"%"]})}),e.jsx("p",{className:"text-center mb-0",children:a.statusMessage}),e.jsxs("div",{className:"text-center mt-2 text-muted small",children:["Processed: ",a.current," / ",a.total]})]}),t&&e.jsxs("div",{children:[e.jsxs("div",{className:"alert alert-success mb-3",children:[e.jsx("strong",{children:"Completed!"})," ",a.success," episode",a.success!==1?"s":""," updated, ",a.failed," skipped"]}),o.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{className:"btn btn-link p-0 text-decoration-none w-100 text-start d-flex justify-content-between align-items-center",onClick:()=>j(!d),children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:`fas fa-chevron-${d?"down":"right"} me-2`}),"Changed Episodes (",o.length,")"]})}),d&&e.jsx("div",{className:"mt-2",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsx("ul",{className:"list-group list-group-flush",children:o.map((s,h)=>e.jsx("li",{className:"list-group-item px-2 py-2",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-bold small",children:x(s)}),e.jsxs("div",{className:"text-muted small",children:["→ ",s.streamName]})]}),e.jsx("span",{className:"badge bg-success text-white small ms-2",children:s.matchReason})]})},h))})})]}),m.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("button",{className:"btn btn-link p-0 text-decoration-none w-100 text-start d-flex justify-content-between align-items-center",onClick:()=>g(!c),children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:`fas fa-chevron-${c?"down":"right"} me-2`}),"Skipped Episodes (",m.length,")"]})}),c&&e.jsx("div",{className:"mt-2",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsx("ul",{className:"list-group list-group-flush",children:m.map((s,h)=>{let l="",i="bg-warning";return s.skipReason==="NoMatch"?(l="No Match",i="bg-warning"):s.skipReason==="AlreadyMatched"?(l="Already Set",i="bg-warning"):s.skipReason==="KeywordFiltered"?(l="No Match (Keyword)",i="bg-warning"):s.skipReason==="Error"&&(l="Error",i="bg-danger"),e.jsx("li",{className:"list-group-item px-2 py-2",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"fw-bold small",children:x(s)}),s.skipReason==="AlreadyMatched"&&s.streamName&&e.jsxs("div",{className:"text-muted small",children:["→ ",s.streamName]}),s.skipReason==="Error"&&s.errorMessage&&e.jsx("div",{className:"text-danger small",children:s.errorMessage})]}),e.jsx("span",{className:`badge ${i} text-white small ms-2`,children:l})]})},h)})})})]})]})]}),t&&n&&e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,children:"Close"})})]})})})};export{f as ProgressModal};
